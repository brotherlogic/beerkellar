syntax = "proto3";

package beerkellar;

import "beer.proto";

option go_package = "github.com/brotherlogic/beerkellar/proto";


message User {
    string auth = 1;
    string access_token = 2;
    string username = 3;
}

message AddBeerRequest {
  int64 beer_id = 1;
  int32 quantity = 2;
  int32 size_fl_oz = 3;
}

message AddBeerResponse {
}


message GetLoginRequest {}

message GetLoginResponse {
  string url = 1;
  string code = 2;
}

message GetAuthTokenRequest {
  string code = 1;
}

message GetAuthTokenResponse {
  string code = 1;
}

message GetBeerRequest {
  int32 max_units = 1;
}

message GetBeerResponse{
  Beer beer = 1;
}

message HealthyRequest {}
message HealthyResponse {}

service BeerKeller {
  rpc AddBeer(AddBeerRequest) returns (AddBeerResponse) {}
  rpc GetBeer(GetBeerRequest) returns (GetBeerResponse) {}

  rpc GetLogin(GetLoginRequest) returns (GetLoginResponse) {}
  rpc GetAuthToken(GetAuthTokenRequest) returns (GetAuthTokenResponse) {}

  rpc Healthy(HealthyRequest) returns (HealthyResponse) {}
}

message SetRedirectRequest {
  string url = 1;
}

message SetRedirectResponse {
}

service BeerKellerAdmin {
  rpc SetRedirect(SetRedirectRequest) returns (SetRedirectResponse) {}
}